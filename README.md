# Soil Health Mapping using Satellite Data

This repository contains code and resources for training Random Forest Regressor models to predict soil health parameters (Nitrogen, Phosphorus, Potassium, Organic Carbon) using remote sensing data (Sentinel-2) and environmental datasets (MODIS, CHIRPS, SOILGRIDS, SRTM).

---

## ðŸ“¦ Installation

We recommend using a virtual environment to avoid dependency conflicts.

### 1. Clone the repository

```bash
git clone https://github.com/Aakash3101/shc-code.git
cd shc-code
````

### 2. Create and activate a virtual environment

```bash
python3 -m venv venv
source venv/bin/activate  # For Windows: venv\Scripts\activate
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

---

## ðŸ“¥ Downloading Data

### A. Soil Health Data

### B. Satellite & Environmental Data (via Google Earth Engine)

---

## ðŸš€ Running the Project

---

## ðŸ“Š Evaluation

---

## ðŸ—‚ Directory Structure

```
shc-code/
â”‚
â”œâ”€â”€ shc-data/
â”‚   â”œâ”€â”€ Agro_Ecological_Regions.geojson
â”‚   â”‚
â”‚   â”œâ”€â”€ KML_files/states/
â”‚   â”‚   â”œâ”€â”€ HARYANA                 # State
|   |   |   â”œâ”€â”€ FARIDABAD           # District
â”‚   â”‚   â”‚   â”œâ”€â”€ GURUGRAM            # KML files for each period along with
|   |   |   â”œâ”€â”€ ....                # features.json which has combined data
â”‚   â”‚   â”‚   â””â”€â”€ KARNAL              # of all the KML files for that district
â”‚   â”‚   â”œâ”€â”€ ....
â”‚   â”‚   â””â”€â”€ BIHAR
â”‚   â”‚
â”‚   â”œâ”€â”€ YEAR_WISE_DATA/
â”‚   â”‚   â”œâ”€â”€ 2023
â”‚   â”‚   |   â”œâ”€â”€ ASSAM_2023.csv      # Each State/UT as a CSV file with Soil Health Data
â”‚   â”‚   â”‚   â””â”€â”€ ....
â”‚   â”‚   â””â”€â”€ 2024
â”‚   â”‚
â”‚   â”œâ”€â”€ NORMALIZED_DATA/            # Soil Health Data after applying Z-score district-wise
â”‚   â”‚   â”œâ”€â”€ 2023
|   |   |   â”œâ”€â”€ ASSAM_2023.csv      # Each State/UT as a CSV file with Soil Health Data
â”‚   â”‚   â”‚   â””â”€â”€ ....
â”‚   â”‚   â”œâ”€â”€ 2024
â”‚   â”‚   â””â”€â”€ AGRI_2023-24
â”‚   â”‚
â”‚   â”œâ”€â”€ SATELLITE_DATA/             # Download the exported CSV files from Google Drive
â”‚   â”‚   â”œâ”€â”€ 2023
|   |   |   â”œâ”€â”€ ASSAM               # Each State/UT as a folder with CSV files for that state
â”‚   â”‚   â”‚   â””â”€â”€ ....
â”‚   â”‚   â”œâ”€â”€ 2024
â”‚   â”‚   â””â”€â”€ AGRI_2023-24
â”‚   â”‚
â”‚   â””â”€â”€ AEZS/                       # Satellite data split into AEZs
â”‚       â”œâ”€â”€ 2023
|       |   â”œâ”€â”€ AEZ2.csv            # Soil Health Data + Satellite Data for each AEZ
â”‚       â”‚   â””â”€â”€ ....
â”‚       â”œâ”€â”€ 2024
â”‚       â””â”€â”€ AGRI_2023-24
â”‚
â”œâ”€â”€ rfr_joblib/                     # Trained Random Forest models as joblib files
â”œâ”€â”€ rfr_csv/                        # Random Forest models stored as CSV files
â”œâ”€â”€ plots/
â”‚   â”œâ”€â”€ AEZ_2                       # Plots for each AEZ
|   |   â”œâ”€â”€ N                       # Plots for each property
â”‚   â”‚   |   â””â”€â”€ ....
|   |   â”œâ”€â”€ P
â”‚   â”‚   â”œâ”€â”€ K
|   |   â””â”€â”€ OC
â”‚   â”œâ”€â”€ AEZ_19
â”‚   â””â”€â”€ AEZ_20
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ fetch_features.py
â”‚   â”œâ”€â”€ get_feature_info.py
â”‚   â”œâ”€â”€ get_layer_info.py
â”‚   â””â”€â”€ segregate_by_aez.py
â”‚
â”œâ”€â”€ 1_data_download.py
â”œâ”€â”€ 2_segregate_data_by_state.py
â”œâ”€â”€ 3_data_preprocessing.ipynb
â”œâ”€â”€ 4_satellite_datapipeline.ipynb
â”œâ”€â”€ 5_process_satellite_to_aez.ipynb
â”œâ”€â”€ 6_balanced_RF_model.ipynb
â”œâ”€â”€ 7_rf_to_csv.ipynb
â”œâ”€â”€ 8_predict_and_generate.ipynb
â”œâ”€â”€ .gitattributes
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ðŸ“Œ Notes

* Google Earth Engine (GEE) Python API requires authentication and quota limits may apply.
* You can customize the model training script to use month-wise or season-wise satellite composites.
* For large datasets, split feature extraction and process in batches to avoid memory errors.

---

## ðŸ“ƒ License

MIT License. See the [LICENSE](LICENSE) file for details.

---

## ðŸ“¬ Contact

For issues, raise a GitHub Issue or email [aakash312000@gmail.com](mailto:aakash312000@gmail.com).